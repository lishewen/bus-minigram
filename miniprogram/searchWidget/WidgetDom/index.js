!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(6),c=r(s),h=n(1),f=r(h),d=function(t){function e(t){return o(this,e),t=t||{},a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return l(e,t),u(e,[{key:"draw",value:function(){}},{key:"__draw",value:function(t,e,n){this.ctx=t,n&&!this.parentNode&&this.ctx.setGlobalAlpha(1),t.save(),this.__translate(),this.__setOpacity(),this.__transform(),t.save(),this.__drawBackground(),this.__drawShadow(),this.__drawBorder(),this.draw(),t.restore(),this.drawChildren(e,t),e&&f.default.drawDebugBoundary(this,t),t.restore()}},{key:"__setOpacity",value:function(){var t=this.style.opacity;if(t&&!(t>1)){var e=this.getOpacity();e&&e<1&&(t*=e),this.ctx.setGlobalAlpha(t)}}},{key:"getOpacity",value:function(){for(var t=this.parentNode,e=1;t;)t.style.opacity&&(e=Math.min(t.style.opacity*e,1)),t=t.parentNode;return e}},{key:"getPos",value:function(){for(var t=0,e=0,n=this;n;)t+=n.layout.left||0,e+=n.layout.top||0,n=n.parentNode;return{left:t,top:e}}},{key:"__translate",value:function(){var t=this.layout,e=t.left,n=t.top;(e||n)&&this.ctx.translate(Math.round(e),Math.round(n))}},{key:"__transform",value:function(){var t=this.ctx,e=this.style,n=e.transformOrigin,r=e.rotate,i=e.scale,o=this.layout,a=o.width,l=o.height;(r||i)&&(n&&n.length||(n=[a/2,l/2]),t.translate(n[0],n[1]),null!=r&&t.rotate(r*Math.PI/180),null!=i&&(i.constructor===Array?t.scale(i[0],i[1]):t.scale(i,i)),t.translate(-n[0],-n[1]))}},{key:"__drawBackground",value:function(){var t=this.ctx,e=this.style.backgroundColor,n=this.layout,r=n.width,i=n.height;e&&(t.save(),t.setFillStyle(e),t.fillRect(0,0,r,i),t.restore())}},{key:"__drawShadow",value:function(){var t=this.ctx,e=this.style.boxShadow,n=this.layout,r=n.width,o=n.height;e&&(t.save(),t.setShadow.apply(t,i(e)),t.setFillStyle("#FFF"),t.fillRect(0,0,r,o),t.restore())}},{key:"__setBorderRadiusContext",value:function(t,e,n,r,i,o){var a=i/2;t.beginPath(),t[o](e-r-a,a),t.arc(e-r-a,r+a,r,-Math.PI/2,0),t[o](e-a,n-r-a),t.arc(e-r-a,n-r-a,r,0,Math.PI/2),t[o](r+a,n-a),t.arc(r+a,n-r-a,r,Math.PI/2,Math.PI),t[o](a,r+a),t.arc(r+a,r+a,r,-Math.PI,-Math.PI/2),t[o](e-r-a,a)}},{key:"__drawBorderRadius",value:function(t,e,n,r,i,o){this.__setBorderRadiusContext(t,e,n,r,i,o),t.stroke()}},{key:"__drawSingleBorder",value:function(t,e,n,r,i){for(var o=(this.style.borderWidth,this.ctx),a=4*i,l=void 0,u=void 0,s=Math.floor((e===r?n-t:r-e)/a)/2,c=0;c<s;c++)l=2*c*a,u=(2*c+1)*a,e===r?(o.moveTo(t+l,e),o.lineTo(t+u,e)):t===n&&(o.moveTo(t,e+l),o.lineTo(t,e+u))}},{key:"__drawBorder",value:function(){var t=this.style,e=t.borderLeftWidth,n=t.borderBottomWidth,r=t.borderRightWidth,i=t.borderTopWidth,o=t.borderWidth,a=t.borderColor,l=void 0===a?"black":a,u=t.borderStyle,s=void 0===u?"solid":u,c=t.borderRadius,h=void 0===c?0:c,f=this.layout,d=f.width,y=f.height,g=this.ctx;if(o||n||i||e||r){if(g.save(),g.setStrokeStyle(l),o)return g.setLineWidth(o),h&&this.__drawBorderRadius(g,d,y,h,o,"dashed"===s?"moveTo":"lineTo"),"solid"!==s||h?"dashed"===s&&(g.beginPath(),this.__drawSingleBorder(h,o/2,d-h,o/2,o),this.__drawSingleBorder(o/2,h,o/2,y-h,o),this.__drawSingleBorder(d-o/2,h,d-o/2,y-h,o),this.__drawSingleBorder(h,y-o/2,d-h,y-o/2,o),g.closePath(),g.stroke()):g.strokeRect(o/2,o/2,d-o,y-o),void g.restore();g.beginPath(),n&&(g.setLineWidth(n),"solid"===s?(g.moveTo(0,y-n/2),g.lineTo(d,y-n/2)):"dashed"===s&&this.__drawSingleBorder(0,y-n/2,d,y-n/2,n)),e&&(g.setLineWidth(e),"solid"===s?(g.moveTo(e/2,0),g.lineTo(e/2,y)):"dashed"===s&&this.__drawSingleBorder(e/2,0,e/2,y,e)),r&&(g.setLineWidth(r),"solid"===s?(g.moveTo(d-r/2,0),g.lineTo(d-r/2,y)):"dashed"===s&&this.__drawSingleBorder(d-r/2,0,d-r/2,y,r)),i&&(g.setLineWidth(i),"solid"===s?(g.moveTo(0,i/2),g.lineTo(d,i/2)):"dashed"===s&&this.__drawSingleBorder(0,i/2,d,i/2,i)),g.closePath(),g.stroke(),g.restore()}}},{key:"drawChildren",value:function(t){var e=this;this.children.forEach(function(n){n.parentNode=e,n.__draw(e.ctx,t)})}},{key:"isInnerPoint",value:function(t,e){var n=this.getPos(),r=this.layout,i=r.width,o=r.height,a=n.left,l=n.top;return t>=a&&t<=a+i&&e>=l&&e<=l+o}}]),e}(c.default);e.default=d},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var i="rgba(248, 225, 24, 0.6)",o="rgba(100, 255, 243, 0.6)";e.default={drawDebugBoundary:function(t,e){var n=t.layout,r=n.width,a=n.height,l=t.style,u=l.borderTopWidth,s=l.borderBottomWidth,c=l.borderLeftWidth,h=l.borderRightWidth,f=l.marginTop,d=l.marginLeft,y=l.marginRight,g=l.marginBottom,p=l.paddingRight,v=l.paddingLeft,_=l.paddingTop,m=l.paddingBottom,b=l.margin,w=l.padding,x=l.borderWidth;f=f||b||0,d=d||b||0,y=y||b||0,g=g||b||0,p=p||w||0,v=v||w||0,_=_||w||0,m=m||w||0,h=h||x||0,c=c||x||0,u=u||x||0,s=s||x||0,e.save(),f&&(e.save(),e.setFillStyle(i),e.translate(0,-f),e.fillRect(0,0,r,f),this.drawBoundaryDetail(r,f,f,e),e.restore()),d&&(e.save(),e.setFillStyle(i),e.translate(-d,0),e.fillRect(0,0,d,a),this.drawBoundaryDetail(d,a,d,e),e.restore()),y&&(e.save(),e.setFillStyle(i),e.translate(r,0),e.fillRect(0,0,y,a),this.drawBoundaryDetail(y,a,y,e),e.restore()),g&&(e.save(),e.setFillStyle(i),e.translate(0,a),e.fillRect(0,0,r,g),this.drawBoundaryDetail(r,g,g,e),e.restore()),p&&(e.save(),e.translate(r-p-h,u),e.setFillStyle(o),e.fillRect(0,0,p,a-u-s),this.drawBoundaryDetail(p,a-u-s,p,e),e.restore()),v&&(e.save(),e.translate(c,u),e.setFillStyle(o),e.fillRect(0,0,v,a-s-u),this.drawBoundaryDetail(v,a-s-u,v,e),e.restore()),_&&(e.save(),e.translate(c,u),e.setFillStyle(o),e.fillRect(0,0,r-c-h,_),this.drawBoundaryDetail(r-c-h,_,_,e),e.restore()),m&&(e.save(),e.translate(c,a-m-s),e.setFillStyle(o),e.fillRect(0,0,r-c-h,m),this.drawBoundaryDetail(r-c-h,m,m,e),e.restore()),r&&a&&(e.setStrokeStyle("rgba(143, 143, 143, 1)"),e.strokeRect(0,0,r,a)),e.restore()},drawBoundaryDetail:function(t,e,n,r){n+="",r.setFontSize(10),r.setFillStyle("red"),r.fillText(n,(t-5*n.length)/2,(e-10)/2+10)},outputElementStyleInfo:function(t){var e=(t.attr,t.attr.class,t.attr.__classObj,t.attr.style,{element:"color:#239a3b;font-size:20px;",className:"color:#0366d6;font-size:16px",common:"color:#000",attrName:"color:#f00"});console.clear(),console.log("%c<"+t.constructor.name+">",e.element),t.attr.class&&console.log("%c-class %c"+t.attr.class,e.className,e.common);var n=this.formatOutputInfo(JSON.stringify(t.style,null,2),e),i=this.formatOutputInfo(JSON.stringify(t.layout,null,2),e);console.log.apply(null,["%c-style %c"+n.output,e.className,e.common].concat(r(n.styles))),console.log.apply(null,["%c-layout %c"+i.output,e.className,e.common].concat(r(i.styles)))},formatOutputInfo:function(t,e){var n=[];return t=t.replace(/"(.+)"\:\s(.+?)/g,function(t,r,i){return n.push(e.attrName),n.push(e.common),"%c"+r+"%c: "+i}),{output:t,styles:n}},drawDebugMask:function(t,e){var n=e.getPos();t.setFillStyle("rgba(252, 156, 225, 0.5)"),t.fillRect(n.left,n.top,e.layout.width,e.layout.height)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(3),o=r(i),a=n(4),l=r(a),u=n(5),s=r(u),c=n(0),h=r(c),f=n(7),d=r(f),y=n(8),g=r(y),p=n(1),v=r(p),_=n(9),m=r(_),b=void 0,w=void 0,x={useDynamicHeight:!1},S=0;t.exports={init:function(t){this.windowWidth=t.windowWidth||200,this.windowHeight=t.windowHeight||200,this.ctx=t.ctx,this.render=t.render,this.classObj=t.classObj,this.layoutDebug=t.layoutDebug,this.imageDebug=t.imageDebug,this.minFontSize=t.minFontSize||10,this.scaleRatio=this.windowWidth/384,this.disablePolling=t.disablePolling,this.maxPollingCount=t.maxPollingCount||20},draw:function(){var t=this,e=(this.ctx,this.tpl,this.classObj),n=this.data,r=void 0;s.default.getInfo(function(i){d.default.systemInfo=i;var a=t.render(n,{View:h.default,Image:g.default,Text:d.default});if(x.useDynamicHeight&&(a=t.__processDynamicHeightTree(a),e=l.default.processDynamicClassObj(e)),t.__setContainerSize(a),a=l.default.processStyle(a,e),t.__scaleSize(a),(0,o.default)(a),clearTimeout(b),S=0,t.root=a,x.useDynamicHeight&&t.root.children[0])return r=t.root.layout.height=t.root.children[0].layout.height,void t.setDynamicHeight(r,function(e){t.__draw()});t.__draw(a)})},__draw:function(){var t=this;this.root.__draw(this.ctx,this.layoutDebug,this.imageDebug),this.ctx.draw(),this.layoutDebug&&w&&v.default.drawDebugMask(this.ctx,w),this.imageDebug&&m.default.drawDebugImage(this.ctx,this.imageDebug),this.disablePolling||(b=setTimeout(function(){t.__isDirty(t.root)?t.draw():t.__draw(),S++},500))},__isDirty:function(t){for(var e=void 0,n=0;n<t.children.length;n++){if(e=t.children[n],e.dirty)return e.dirty=!1,!0;if(this.__isDirty(t.children[n]))return!0}return!1},setDynamicHeight:function(t,e){console.log("dynamicHeight:"+t),wx.setWidgetSize?wx.setWidgetSize({height:t,success:function(t){e&&e(t.errCode)},fail:function(t){e&&e(t.errCode)}}):e&&e()},__processDynamicHeightTree:function(t){var e=new h.default({attr:{class:"__dynamic-height-container"},parentNode:t,children:t.children});return e.children.forEach(function(t){t.parentNode=e}),t.children=[e],t},__scaleSize:function(t){var e=this,n=this.scaleRatio;["width","height","left","top","right","bottom","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","borderWidth","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","fontSize","lineHeight"].forEach(function(r){null!=t.style[r]&&(t.style[r]="fontSize"===r?Math.max(e.minFontSize,Math.round(n*t.style[r])):Math.round(n*t.style[r]))}),t.children.forEach(function(t){e.__scaleSize(t)})},measureText:function(t,e){return new d.default({attr:{content:t},style:{fontSize:e}}).measureText()},handleTap:function(t){var e=this.layoutDebug,n=t.x,r=t.y,i=this.root,o=[],a=void 0,l=void 0,u=!1;if(i){if(this.__detectTap(i,n,r,o),!(l=o[o.length-1]))return u;if(e)v.default.outputElementStyleInfo(l),w=l,u=!0;else for(;o.length;){a=o.pop();var s={x:n,y:r,target:l,currentTarget:a};if("function"==typeof a.attr.bindtap&&(a.attr.bindtap(s),u=!0),"function"==typeof a.attr.catchtap){a.attr.catchtap(s),u=!0;break}}}return u},__detectTap:function(t,e,n,r){if(t.isInnerPoint(e,n)){r.push(t);for(var i=0;i<t.children.length;i++){var o=t.children[i];this.__detectTap(o,e,n,r)}}},__setContainerSize:function(t){t.attr.class="root",t.style.width=384,t.style.height=Math.floor(384*this.windowHeight/this.windowWidth),t.style.fontSize=14},setRender:function(t){this.render=t},setData:function(t){this.data=Object.assign(this.data||{},t),this.draw()},setClassObj:function(t){this.classObj=t},getSystemInfo:function(t){s.default.getInfo(t)},useDynamicHeight:function(){x.useDynamicHeight=!0},canIUse:function(t,e){s.default.canIUse(t,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={flexDirection:"row",padding:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,margin:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,borderWidth:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,borderBottomWidth:0,position:"relative",flexGrow:null,flexShrink:1,flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"stretch",alignContent:"stretch",alignSelf:null,left:null,right:null,top:null,bottom:null,width:null,height:null},i={row:"width",column:"height"},o={row:"left",column:"top"},a={row:"right",column:"bottom"},l=function(){return{left:0,top:0,width:0,height:0}},u=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},s=function(t,e,n){return e?!n&&t._calculateStyle&&null!=t._calculateStyle[e]?t._calculateStyle[e]:t.style&&null!=t.style[e]?t.style[e]:r[e]:t.style},c=function(t,e){return e in t.style},h=function(t,e){var n="padding"+u(e),r=c(t,n),i=c(t,"padding");return r?s(t,n):i?s(t,"padding"):0},f=function(t,e){var n="margin"+u(e),r=c(t,n),i=c(t,"margin");return r?s(t,n):i?s(t,"margin"):0},d=function(t,e){var n="border"+u(e)+"Width",r=c(t,n),i=c(t,"borderWidth");return r?s(t,n):i?s(t,"borderWidth"):0},y=function(t,e){return(s(t,o[e])||0)-(s(t,a[e])||0)},g=function(t,e){var n=s(t,i[e]),r=h(t,o[e])+h(t,a[e]);return Math.max(n,r)},p=function(t,e){return f(t,o[e])+(y(t,e)||0-y(t,e)||0)},v=function(t,e){var n=t.layout[i[e]];return Math.max(0,(n||0)-h(t,o[e])-h(t,a[e])-d(t,o[e])-d(t,a[e]))},_=function(t,e){return s(t,i[e])+f(t,o[e])+f(t,a[e])},m=function(t){for(var e=0,n=0;n<t.length;n++)e+=Number(s(t[n],"flexGrow"));return e},b=function(t,e,n){for(var r=e/m(t),o=0;o<t.length;o++){var a=Number(s(t[o],"flexGrow")),l=r<=0?0:a*r;t[o].layout[i[n]]=t[o]._calculateStyle[i[n]]=l}},w=function(t,e,n,r,l,u){var s=0,c=void 0,h=t.concat(e).sort(function(t,e){return t._columnIndex-e._columnIndex}),d=0===t.length||l<0,g=void 0;d&&"flex-start"!==n?"flex-end"===n?s=l:"center"===n?s=l/2:"space-around"===n&&(l<0&&(s=l/2),g=Math.max(0,l)/(2*h.length)):s=0;for(var p=0;p<h.length;p++)c=h[p],d&&("space-between"===n?s+=0===c._columnIndex?0:Math.max(0,l)/(h.length-1):"space-around"===n&&(s+=0===c._columnIndex?g:2*g)),s+=f(c,o[r]),c.layout[o[r]]=u+s+y(c,r),s+=c.layout[i[r]]+f(c,a[r]);return s},x=function(t,e){return s(t,"alignSelf")||s(e,"alignItems")},S=function(t){return"absolute"===s(t,"position")},O=function(t,e,n,r,l,u){var c=(s(l,"alignItems"),s(l,"alignContent")),h=n.length>=2?n.reduce(function(t,e){return t+e}):1===n.length?n[0]:0,d=r-h;n.length>1?"stretch"===c&&(n=n.map(function(t){return Math.max(0,d)/n.length+t})):n=[r];for(var g=0;g<e.length;g++){var p=e[g],v=s(p,i[t],!0),m=x(p,l),b=0,w=0,S=0;p.layout[i[t]]="stretch"===m&&null==v?n[p._lineIndex]-f(p,o[t])-f(p,a[t]):s(p,i[t]),"flex-start"===m||"stretch"===m?b=f(p,o[t]):"flex-end"===m?b=n[p._lineIndex]-p.layout[i[t]]-f(p,a[t]):"center"===m&&(b=(n[p._lineIndex]-_(p,t))/2+f(p,o[t])),n.length>1&&("flex-start"===c||"stretch"===c?w=0:"flex-end"===c?w=r-h:"space-between"===c?w=Math.max(0,d)/(n.length-1)*p._lineIndex:"space-around"===c&&(w=d<0?d/2:d/(2*n.length)*(2*p._lineIndex+1))),S=p._lineIndex>=2?n.slice(0,p._lineIndex).reduce(function(t,e){return t+e}):n[p._lineIndex-1]||0,p.layout[o[t]]=u+w+b+S+y(p,t),D(p)}},P=function(t,e,n,r){var l=r-n,u=0,c=0,h=[],d=[];return t.forEach(function(t,n){d[n]=Math.max(0,s(t,"flexShrink")),h[n]=g(t,e)*d[n],c+=h[n]}),t.forEach(function(t,n){var r=f(t,o[e])+f(t,a[e]);h[n]>0&&(t.layout[i[e]]=Math.max(0,t.layout[i[e]]-h[n]/c*l)),u+=t.layout[i[e]]+r}),u},T=function t(e,n,r){e.style=e.style||{},e.children=e.children||[],e._calculateStyle=e._calculateStyle||{};var i=s(e,"flexDirection"),o=e.children.filter(function(t){return!S(t)});n-=k(e,"row");var a=s(e,"width"),l=0;return null==a?e.measureText?(W(e,n),r?e._calculateStyle.width+f(e,"left")+f(e,"right"):e._calculateStyle.width):("row"===i?o.forEach(function(e){var r=t(e,n-l-f(e,"left")-f(e,"right"),!0);l+=r}):o.forEach(function(e){var r=t(e,n,!0);r>l&&(l=r)}),r?l+k(e,"row")+f(e,"left")+f(e,"right"):l+k(e,"row")):r?_(e,"row"):a},j=function t(e,n,r,i){e.style=e.style||{},e.children=e.children||[],e._calculateStyle=e._calculateStyle||{};var o=s(e,"flexDirection"),a=e.children.filter(function(t){return!S(t)});r-=k(e,"column"),s(e,"width")?n=s(e,"width")-k(e,"row"):n-=k(e,"row");var l=s(e,"height"),u=0;return null==l?e.measureText?(W(e,n),i?e._calculateStyle.height+f(e,"top")+f(e,"bottom"):e._calculateStyle.height):("column"===o?a.forEach(function(e){u+=t(e,n,r,!0)}):a.forEach(function(e){var i=t(e,n,r,!0);i>u&&(u=i)}),i?u+k(e,"column")+f(e,"top")+f(e,"bottom"):u+k(e,"column")):i?_(e,"column"):l},k=function(t,e){return h(t,o[e])+h(t,a[e])+d(t,o[e])+d(t,a[e])},I=function(t){t.style=t.style||{},t.layout=t.layout||l();var e=s(t,"flexDirection"),n="row"===e?"column":"row",r=g(t,e),a=g(t,n);p(t,e);"relative"===s(t,"position")&&(t.layout[i[e]]=r,t.layout[i[n]]=a,t.layout[o[e]]+=p(t,e),t.layout[o[n]]+=p(t,n)),D(t)},W=function(t,e){t.style=t.style||{},t.layout=t.layout||l(),t._calculateStyle={};var n=void 0,r=void 0,i=void 0,o=void 0,a=void 0;o=t.measureText()+k(t,"row"),null==s(t,"width")?(i=Math.ceil(o/e),n=o>e?e:o):(n=s(t,"width"),i=Math.ceil(o/n)),"ellipsis"===s(t,"textOverflow")&&(a=s(t,"lineClamp")||1,i=Math.min(i,a)),r=null==s(t,"height")?t.getLineHeight()*i+k(t,"column"):s(t,"height"),t._calculateStyle.width=n,t._calculateStyle.height=r},D=function(t){var e=t.children||[],n=void 0,r=s(t,"flexDirection"),u="row"===r?"column":"row",c=v(t,r),y=v(t,u);if(t.layout.contentWidth="row"===r?c:y,t.layout.contentHeight="row"===r?y:c,e.length){var g=(s(t,"flexDirection"),s(t,"flexWrap")),p=s(t,"justifyContent"),m=(s(t,"width"),s(t,"height"),[]),x=[],k=0,I=0,D=0,C=[],M=0,B=void 0,N=h(t,o[r])+d(t,o[r]),R=h(t,o[u])+d(t,o[u]),E=void 0;n=e.filter(function(t){return!S(t)});for(var F=0;F<n.length;F++){var z=n[F];z.style=z.style||{},z.layout=z.layout||l(),z._calculateStyle={};var L=s(z,"flexGrow");s(z,"position");z._columnIndex=D,z._lineIndex=I,0===D&&(M=0,k=0,m=[],x=[]);var A=s(z,i[r]),H=s(z,i[u]),G=f(z,"left")+f(z,"right");if(null==A&&null==L&&("row"===r?z._calculateStyle.width=T(z,t.layout.contentWidth-k-G):z._calculateStyle.height=j(z,t.layout.contentWidth,t.layout.contentHeight)),null==H&&("row"===r?z._calculateStyle.height=j(z,t.layout.contentWidth-k-G,t.layout.contentHeight):z._calculateStyle.width=T(z,t.layout.contentWidth)),z.measureText&&("row"===r?W(z,t.layout.contentWidth-k-G):W(z,t.layout.contentWidth)),E=null!=L?f(z,o[r])+f(z,a[r]):_(z,r),B=k+E>c,"wrap"===g&&B&&D>0)b(m,c-k,r),C[I]=M,w(m,x,p,r,c-k,N),I+=1,D=0,F--;else{if(_(z,u)>M&&(M=_(z,u)),null!=L)m.push(z);else{var U=s(z,i[r]);null!=U&&(z.layout[i[r]]=U),x.push(z)}if(k+=E,F===n.length-1||B&&"wrap"===g&&0===D){var V=void 0;b(m,c-k,r),B&&(V=P(x,r,c,k)),C[I]=M,w(m,x,p,r,null==V?c-k:c-V,N),D=0}D+=1}}O(u,n,C,y,t,R)}};e.default=I},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={processStyle:function(t,e){var n=this,r=t.attr.class||"";t.attr.style;return r.split(" ").forEach(function(r){n.calculateClassObj(t,r,e)}),t.style=Object.assign(t.style,t.attr.__classObj,t.attr.style),t.children.forEach(function(r){r.parentNode=t,n.processStyle(r,e)}),t},calculateClassObj:function(t,e,n){var r=this;t.attr.__classObj||(t.attr.__classObj={});for(var i in n)!function(i){var o=i.split(","),a=n[i];o.length>1?o.forEach(function(n){n=n.trim(),r.calculateSingleClassObj(t,e,n,a)}):r.calculateSingleClassObj(t,e,i,a)}(i)},calculateSingleClassObj:function(t,e,n,r){if(/\:first-child/.test(n)){if(n.indexOf(e)<0||!t.isFirstChild())return}else if(/\:last-child/.test(n)){if(n.indexOf(e)<0||!t.isLastChild())return}else if(e!==n)return;Object.assign(t.attr.__classObj,r)},processDynamicClassObj:function(t){return t=Object.assign({},t,{"__dynamic-height-container":{flexDirection:"column",flexShrink:0}}),t.root=Object.assign({},t.root,{alignItems:"stretch",justifyContent:"flex-start",flexDirection:"column"}),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=void 0,i=void 0,o={useDynamicHeight:["6.5.16","6.5.14"],makePhoneCall:["6.5.16","6.5.14"]};e.default={getInfo:function(t){r?setTimeout(function(){t&&t(r)},0):i?i.push(t):(i=[t],wx.getSystemInfo({success:function(t){r=t,i.forEach(function(e){e(t)}),i=[]}}))},compareVersion:function(t,e){if(!t&&!e)return 0;if(!t)return-1;if(!e)return 1;t=t.split("."),e=e.split(".");for(var n=0;n<t.length;n++){var r=Number(t[n]||0),i=Number(e[n]||0);if(r>i)return 1;if(r<i)return-1}return 0},canIUse:function(t,e){var n=this;if(!o[t])return void(e&&e(!1));this.getInfo(function(r){"ios"===r.platform&&n.compareVersion(r.version,o[t][0])>=0||"android"===r.platform&&n.compareVersion(r.version,o[t][1])>=0?e&&e(!0):e&&e(!1)})}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(e){r(this,t),e=e||{},this.attr=e.attr||{},this.style=e.style||{},this.nextSibling=e.nextSibling,this.previousSbling=e.previousSbling,this.parentNode=e.parentNode,this.children=e.children||[]}return o(t,[{key:"insertBefore",value:function(t,e){for(var n=e.parentNode?e.parentNode.children:root.children,r=0;r<n.length;r++)if(n[r]===e)return e===t?n[r]=t:n.splice(r,0,t),void(t.parentNode=this)}},{key:"isFirstChild",value:function(){return 0===this.getIndexInParent()}},{key:"isLastChild",value:function(){var t=this.parentNode;return!t||this.getIndexInParent()===t.children.length-1}},{key:"getIndexInParent",value:function(){return this.parentNode?this.parentNode.children.indexOf(this):0}},{key:"remove",value:function(){var t=this.parentNode?this.parentNode.children:root.children,e=t.indexOf(this);t.splice(e,1),this.parentNode=null}},{key:"__resetParentNode",value:function(t){var e=this;t.children=t.children||[],t.children.forEach(function(n){n.parentNode=t,e.__resetParentNode(n)})}},{key:"__deepClone",value:function(e){var n=void 0;n=e instanceof t?new e.constructor(e):new e.constructor;for(var r in e)"parentNode"!==r&&"nextSibling"!==r&&"previousSbling"!==r&&(n[r]="object"===i(e[r])?this.__deepClone(e[r]):e[r]);return n}},{key:"cloneNode",value:function(e){if(e){var n=this.__deepClone(this);return this.__resetParentNode(n),n.__proto__=this.__proto__,n}return new t(this)}},{key:"toString",value:function(){var t=this.constructor.name.toLocaleLowerCase(),e=this.children.map(function(t){return t.toString()}),n=[];for(var r in this.attr)null!=this.attr[r]&&"content"!==r&&n.push(" "+r+'="'+this.attr[r]+'"');return"<"+t+n.join("")+">"+(e.length?e.join(""):null!=this.attr.content?this.attr.content:"")+"</"+t+">"}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var u,s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(0),h=function(t){return t&&t.__esModule?t:{default:t}}(c),f=(u={a:[.5294,.5294],b:[.6078,.5882],c:[.549,.5294],d:[.6078,.5882],e:[.549,.5294],f:[.3529,.3529],g:[.5882,.5882],h:[.5882,.5294],i:[.2353,.2353],j:[.2353,.2353],k:[.5294,.5294],l:[.2353,.2353],m:[.8627,.8824],n:[.5686,.5294],o:[.5686,.5882],p:[.5882,.5882],q:[.5882,.5882],r:[.3725,.3529],s:[.5098,.5294],t:[.3529,.3529],u:[.5686,.5294],v:[.5294,.4706],w:[.7647,.7647],x:[.5098,.4706],y:[.5294,.4706],z:[.5294,.4706],A:[.6667,.6471],B:[.6471,.6471],C:[.7059,.6471],D:[.7059,.6471],E:[.5882,.5882],F:[.5686,.5294],G:[.7255,.7059],H:[.7255,.7059],I:[.2549,.2941],J:[.5294,.5294],K:[.6471,.6471],L:[.549,.5294],M:[.8627,.8824],N:[.7255,.7059],O:[.7647,.7059],P:[.6275,.6471],Q:[.7647,.7059],R:[.6471,.5882],S:[.6275,.5882],T:[.6275,.5882],U:[.7255,.6471],V:[.6667,.6471],W:[.9608,.8824],X:[.6667,.6471],Y:[.6471,.5882],Z:[.6471,.5882],0:[.6032,.5712],1:[.3932,.5642],2:[.6032,.5712],3:[.6032,.5712],4:[.6032,.5712],5:[.6032,.5712],6:[.6032,.5712],7:[.541,.5712],8:[.6032,.5712],9:[.6032,.5712],"~":[.5686,.7059],"!":[.2941,.2352],"@":[.902,.8823],"#":[.6275,.6471],$:[.6275,.5882],"%":[.7647,.7059],"^":[.4706,.4118],"&":[.7059,.6471],"*":[.4902,.4118],"(":[.3529,.3529],")":[.3529,.3529],"（":[1.0196,1],"）":[1.0196,1],"-":[.612,.2941],_:[.4314,.4706],"+":[.6275,.5882],"=":[.6275,.5294],"[":[.3529,.2941],"]":[.3529,.2941],"{":[.3922,.3529],"}":[.3922,.3529],"|":[.3137,.2352],"/":[.3333,.4118],"\\":[.3333,.4118],"<":[.6275,.5294],">":[.6275,.5294]},l(u,"*",[.4902,.4118]),l(u,";",[.2941,.2352]),l(u,":",[.2745,.2352]),l(u,"'",[.2353,.1765]),l(u,'"',[.4314,.2941]),l(u,"‘",[.3725,.1765]),l(u,"“",[.5686,.3529]),l(u,"”",[.5686,.3529]),l(u,",",[.2941,.1765]),l(u,".",[.2745,.2353]),l(u,"?",[.5686,.4706]),l(u,"。",[1.02,1]),l(u,"~",[.5686,.7059]),l(u," ",[.2745,.2352]),u),d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.style;return n}return a(e,t),s(e,[{key:"getFontSize",value:function(){return this.style.fontSize||this.getParentProp("fontSize")||14}},{key:"getLineHeight",value:function(){return this.style.lineHeight||this.getParentProp("lineHeight")||this.getFontSize()+2}},{key:"getTextShadow",value:function(){return this.style.textShadow||this.getParentProp("textShadow")}},{key:"getTextAlign",value:function(){return this.style.textAlign||this.getParentProp("textAlign")}},{key:"getColor",value:function(){return this.style.color||this.getParentProp("color")||"black"}},{key:"measureText",value:function(t){t=null!=t?t+"":null!=this.attr.content?this.attr.content+"":"";for(var n=this.getFontSize(),r=0,i=0;i<t.length;i++){var o=t[i];if(/[A-Za-z0-9]/.test(o)||"~!@#$%^&*()（）-_+=[]{}|/<>*;:'\"‘“”,.?。 ".indexOf(o)>-1){r+=f[o][e.systemInfo&&"android"===e.systemInfo.platform?1:0]*n}else/[^\x00-\xff]/.test(o)?r+=n:r+=n/2}return Math.round(r)}},{key:"exceedWidth",value:function(t,e){return this.measureText(t)>e}},{key:"getTextStartPos",value:function(){var t=this.style,e=t.paddingLeft,n=t.borderLeftWidth,r=t.paddingTop,i=t.borderTopWidth;return{left:(e||0)+(n||0),top:(r||0)+(i||0)}}},{key:"draw",value:function(){var t=(this.layout.contentWidth,this.style),e=t.textOverflow,n=t.lineClamp,r=void 0===n?1:n,i=void 0;i=this.layout.contentWidth;var o=null!=this.attr.content?this.attr.content+"":"",a="",l=0,u=this.getLineHeight(),s=this.getTextStartPos();if(this.ctx.translate(s.left,s.top),this.exceedWidth(o,i)){for(var c=0;c<o.length;c++)if(a+=o[c],this.exceedWidth(a,i)){if("ellipsis"===e&&r-1===parseInt(l/u))return void this.drawText(a.slice(0,a.length>1?a.length-1:1)+"...",i,l);this.drawText(a.slice(0,a.length>1?a.length-1:1),i,l),a.length>1&&c--,a="",l+=u}a&&this.drawText(a,i,l)}else this.drawText(o,i)}},{key:"getParentProp",value:function(t){for(var e=this.parentNode,n=void 0;e;){if(n=e.style[t])return n;e=e.parentNode}}},{key:"drawText",value:function(t,e,n){var i=this.layout,o=(i.left,i.top,i.width,i.height,this.getTextAlign()),a=this.getFontSize(),l=this.getTextShadow(),u=this.getColor(),s=this.ctx,c=void 0;n=n||0,u&&s.setFillStyle(u),o&&s.setTextAlign(o),a&&s.setFontSize(a),l&&s.setShadow.apply(s,r(l)),o&&e?("center"===o?c=e/2:"left"===o?c=0:"right"===o&&(c=e),s.fillText(t,c,a+n)):s.fillText(t,0,a+n)}}]),e}(h.default);e.default=d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(l),s=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.attr.src=t.attr.src,n}return o(e,t),a(e,[{key:"draw",value:function(){var t=this.ctx;this.attr.src&&t.drawImage(this.attr.src,0,0,this.layout.width,this.layout.height)}}]),e}(u.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={drawDebugImage:function(t,e){t.setGlobalAlpha(.4),t.drawImage(e)}}}])});